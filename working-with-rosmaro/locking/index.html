<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  <link rel="shortcut icon" href="../../img/favicon.ico">
  <title>Locking - Rosmaro</title>
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../../css/highlight.css">
  
  <script>
    // Current page data
    var mkdocs_page_name = "Locking";
    var mkdocs_page_input_path = "working-with-rosmaro/locking.md";
    var mkdocs_page_url = "/working-with-rosmaro/locking/";
  </script>
  
  <script src="../../js/jquery-2.1.1.min.js"></script>
  <script src="../../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../../js/highlight.pack.js"></script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href="../.." class="icon icon-home"> Rosmaro</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="current">
	  
          
            <li class="toctree-l1">
		
    <a class="" href="../..">What is Rosmaro</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../../getting-started/">Getting started</a>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Building blocks</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../building-blocks/leaves/">Leaves</a>
                </li>
                <li class="">
                    
    <a class="" href="../../building-blocks/graphs/">Graphs</a>
                </li>
                <li class="">
                    
    <a class="" href="../../building-blocks/composites/">Composites</a>
                </li>
                <li class="">
                    
    <a class="" href="../../building-blocks/adapters/">Adapters</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Transitions</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../transitions/correct/">Correct</a>
                </li>
                <li class="">
                    
    <a class="" href="../../transitions/incorrect/">Incorrect</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Working with Rosmaro</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../names-of-nodes/">Names of nodes</a>
                </li>
                <li class="">
                    
    <a class="" href="../returning-values/">Returning values</a>
                </li>
                <li class=" current">
                    
    <a class="current" href="./">Locking</a>
    <ul class="subnav">
            
    <li class="toctree-l3"><a href="#synchronization">Synchronization</a></li>
    

    <li class="toctree-l3"><a href="#turning-synchronization-off">Turning synchronization off</a></li>
    

    <li class="toctree-l3"><a href="#what-if-a-method-call-crashes">What if a method call crashes?</a></li>
    

    </ul>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Contribution</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../contribution/storage-specification/">Storage specification</a>
                </li>
                <li class="">
                    
    <a class="" href="../../contribution/locks-specification/">Locks specification</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../../elsewhere/">Rosmaro elsewhere</a>
	    </li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../..">Rosmaro</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../..">Docs</a> &raquo;</li>
    
      
        
          <li>Working with Rosmaro &raquo;</li>
        
      
    
    <li>Locking</li>
    <li class="wy-breadcrumbs-aside">
      
        <a href="https://github.com/lukaszmakuch/rosmaro/edit/doc/docs/working-with-rosmaro/locking.md"
          class="icon icon-github"> Edit on GitHub</a>
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="synchronization">Synchronization</h1>
<p>Every method call is synchronized by default. It means that if we execute the following code:</p>
<pre><code class="js">//counter is a Rosmaro model
counter.incr()
counter.incr()
</code></pre>

<p>the second <em>incr</em> will start executing only after the first <em>incr</em> returns. So even if the <em>incr</em> method is asynchronous, the counter will always be incremented twice.</p>
<h1 id="turning-synchronization-off">Turning synchronization off</h1>
<p>Sometimes it's safe to run a method without synchronization. In a situation like that we can use the <a href="../../building-blocks/leaves#unsynchronized">unsynchronized</a> parameter of a <a href="../../building-blocks/leaves">leaf</a>.</p>
<p>The lock is acquired anyways to read the state of the model and determine whether the call should be synchronized, but as soon as the method call is found unsynchronized, the lock is released. It may provide a significant performance boost in case of long running methods called simultaneously.</p>
<p>If there are few active nodes due to usage of a <a href="../../building-blocks/composites">composite node</a>, all the unsynchronized methods must be marked as <em>unsynchronized</em>. If there are two nodes: <em>A</em> and <em>B</em>, both have a <em>do_it</em> method but just <em>A</em> defines it as <em>unsynchronized</em>, then the call to the <em>do_it</em> method of the Rosmaro model will be synchronized.</p>
<h1 id="what-if-a-method-call-crashes">What if a method call crashes?</h1>
<p>When a method call crashes, the lock is released.</p>
              
            </div>
          </div>
 
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../../contribution/storage-specification/" class="btn btn-neutral float-right" title="Storage specification">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../returning-values/" class="btn btn-neutral" title="Returning values"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
	  
    <a href="https://js.org" target="_blank" title="JS.ORG | JavaScript Community">
    <img src="https://logo.js.org/dark_tiny.png" width="77" alt="JS.ORG Logo"/></a>

        </div>
      </div>

    </section>
    
  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
          <a href="https://github.com/lukaszmakuch/rosmaro" class="fa fa-github" style="float: left; color: #fcfcfc"> GitHub</a>
      
      
        <span><a href="../returning-values/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../../contribution/storage-specification/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script src="../../js/theme.js"></script>

</body>
</html>
